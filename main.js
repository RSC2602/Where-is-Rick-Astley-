var state="stopped",flashlight=null,slothContainer=null,sloth=null,cat=null,catContainer=null,slothScreenX=200,slothScreenY=200,catScreenX=400,catScreenY=400,mouseOverSloth=!1,mouseOverTimeout=null,endingOnMobile=!1;function init(){$(document).ready(function(){flashlight=$("#flashlight"),sloth=$("#sloth"),slothContainer=$("#slothContainer")}),$(document).on("mousemove",mouseMove)}function touchStart(t){"started"===state&&(t.touches&&updateFlashlightPos(t.touches[0].pageX,t.touches[0].pageY),flashlight.show())}function touchEnd(){flashlight.hide()}function goClick(t){startSearch(t)}function goAgainClick(t){reset(),startSearch(t)}function startSearch(t){state="started",updateFlashlightPos(t.pageX,t.pageY),$(".my-dialog").hide(),flashlight.show(),randomlyPlaceSloth()}function randomlyPlaceSloth(){var t=.34*$(window).width(),e=$(window).width()-t,s=.28*$(window).height(),o=$(window).height()-s,h=Math.random(),l=Math.random();slothScreenX=h*$(window).width(),slothScreenY=l*$(window).height(),slothScreenX>t&&slothScreenX<e&&(slothScreenX=e-slothScreenX<slothScreenX-t?e:t-sloth.width()/2),slothScreenY>s&&slothScreenY<o&&(slothScreenY=o-slothScreenY<slothScreenY-s?o:s-sloth.height()/2),slothScreenX+sloth.width()>$(window).width()&&(slothScreenX=$(window).width()-sloth.width()),slothScreenY+sloth.height()>$(window).height()&&(slothScreenY=$(window).height()-sloth.height())}function doBoxesOverlap(t,e){return!(t.top>e.top+e.height||e.top>t.top+t.height)&&!(t.left>e.left+e.width||e.left>t.left+t.width)}function mouseMove(t){updatePositions(t)}function touchMove(t){t.touches&&(t.pageX=t.touches[0].pageX,t.pageY=t.touches[0].pageY),updatePositions(t)}function updatePositions(t){"started"===state&&(updateFlashlightPos(t.pageX,t.pageY),isSlothUnderFlashlight()?(slothContainer.css("visibility","visible"),slothContainer.css("left",parseInt(flashlight.css("left"))),slothContainer.css("top",parseInt(flashlight.css("top"))),sloth.css("left",slothScreenX-parseInt(slothContainer.css("left"))),sloth.css("top",slothScreenY-parseInt(slothContainer.css("top")))):slothContainer.css("visibility","hidden"))}function updateFlashlightPos(t,e){flashlight.css("left",t-flashlight.width()/2).css("top",e-flashlight.height()/2)}function isSlothUnderFlashlight(){var t=parseInt(flashlight.css("left")),e=parseInt(flashlight.css("left"))+flashlight.width(),s=parseInt(flashlight.css("top")),o=parseInt(flashlight.css("top"))+flashlight.height(),h=slothScreenX,l=slothScreenX+sloth.width(),n=slothScreenY,i=slothScreenY+sloth.height(),a=!1;return t<l&&e>h&&s<i&&o>n&&(a=!0),a}function slothMouseOver(){mouseOverSloth||"started"!==state||(mouseOverSloth=!0,mouseOverTimeout=setTimeout(slothMouseOverTimerExpire,200))}function slothMouseOverTimerExpire(){state="found",setTimeout(function(){$("#foundDialog").show()},4e3),slothContainer.addClass("found"),sloth.css("left",slothScreenX),sloth.css("top",slothScreenY),setTimeout(function(){sloth.addClass("enlarging"),document.getElementById("foundMusic").play()},200),$("#shade").hide(),flashlight.hide(),setTimeout(function(){$("#glasses").css("left",parseInt(sloth.css("left"))-sloth.width()/2+118)},1700),setTimeout(function(){$("#glasses").addClass("dropping"),$("#glasses").css("top",parseInt(sloth.css("top"))-sloth.height()/2+71)},1800)}function slothMouseOut(){mouseOverSloth=!1,"found"!==state&&clearTimeout(mouseOverTimeout)}function reset(){location.reload()}function isTouchDevice(){return"ontouchstart"in window||"onmsgesturechange"in window}